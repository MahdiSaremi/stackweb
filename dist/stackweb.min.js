(()=>{var y=Object.defineProperty;var b=(s,t)=>{for(var e in t)y(s,e,{get:t[e],enumerable:!0})};var u={};b(u,{gettype:()=>m,is_bool:()=>M,is_double:()=>E,is_float:()=>x,is_int:()=>N,is_integer:()=>g,is_null:()=>O,is_object:()=>R,is_string:()=>j});function m(s){let t=s.next("value");if(s.end(),t===null)return"null";switch(typeof t){case"undefined":return"null";case"number":return"float";case"bigint":return"int";case"boolean":return"bool";case"string":return"string";case"object":case"function":case"symbol":default:return"object"}}function N(s){let t=s.next("value");return s.end(),typeof t=="bigint"}var g=N;function x(s){let t=s.next("value");return s.end(),typeof t=="number"}var E=x;function M(s){let t=s.next("value");return s.end(),typeof t=="boolean"}function O(s){let t=s.next("value");return s.end(),t==null}function R(s){let t=s.next("value");return s.end(),m(t)==="object"}function j(s){let t=s.next("value");return s.end(),typeof t=="string"}var S={Functions:u};window.PHP=S;var r=class{constructor(){this.isMounted=!1;this.isStatic=!1}mount(t,e,o){this.parent=t,this.parentE=e,this.el=o,this.isMounted=!1,this.onMount(),this.isMounted=!0}unmount(){this.onUnmount(),this.isMounted=!1}morph(t){this.isStatic||this.onMorph(t)}static(){return this.isStatic=!0,this}insertNode(t){if(this.parentE.isMounted){let e=this.parent.resolveNextNodeOf(this);e?this.parent.el.insertBefore(t,e):this.parent.el.appendChild(t)}else this.parent.el.appendChild(t)}},h=class extends r{constructor(e){super();this.source=e}onMount(){this.source.mount(this,this,this.el)}onUnmount(){this.source.unmount()}onMorph(e){this.source.morph(e.source)}resolveRelativeNodes(){return this.source.resolveRelativeNodes()}resolveNextNodeOf(e){}},l=class extends r{constructor(e){super();this.source=e}onMount(){for(let e in this.source)this.source[e].mount(this,this.parentE,this.el)}onUnmount(){for(let e in this.source)this.source[e].unmount()}onMorph(e){for(let o in this.source)this.source[o].morph(e.source[o])}resolveRelativeNodes(){if(this.source.length==0)return[void 0,void 0];if(this.source.length==1)return this.source[0].resolveRelativeNodes();{let e,o,n;for(n=0;n<this.source.length;n++){let i=this.source[n].resolveRelativeNodes();if(i[0]||i[1]){e=i[0]??i[1];break}}for(n=this.source.length-1;n>=0;n--){let i=this.source[n].resolveRelativeNodes();if(i[0]||i[1]){o=i[1]??i[0];break}}return[e,o]}}resolveNextNodeOf(e){let o=this.source.indexOf(e);for(let n=o+1;n<this.source.length;n++){let i=this.source[n].resolveRelativeNodes();if(i[0]||i[1])return i[0]??i[1]}if(this.parent)return this.parent.resolveNextNodeOf(this)}},c=class extends r{constructor(e){super();this.source=e}onMount(){this.el=document.createElement(this.source.name),this.insertNode(this.el),this.source.slot.mount(this,this,this.el)}onUnmount(){this.el.remove(),this.el=void 0}onMorph(e){this.source.slot.morph(e.source.slot)}resolveRelativeNodes(){return[this.el,this.el]}resolveNextNodeOf(e){}},d=class extends r{constructor(e){super();this.value=e}onMount(){this.node=document.createTextNode(this.value),this.insertNode(this.node)}onUnmount(){this.el.removeChild(this.node),this.node=void 0}onMorph(e){this.value=e.value,this.node.textContent=this.value}resolveRelativeNodes(){return[this.node,this.node]}resolveNextNodeOf(e){}},a=class extends r{onMount(){this.node=document.createTextNode("Hello World ("+Math.floor(Math.random()*100)+")"),this.insertNode(this.node)}onUnmount(){this.el.removeChild(this.node),this.node=void 0}onMorph(e){this.node.textContent="Hello World ("+Math.floor(Math.random()*100)+")"}resolveRelativeNodes(){return[this.node,this.node]}resolveNextNodeOf(e){}},p=class{constructor(t){this.morphMode=0;this.source=t}morphType(t){return this.morphMode=t,this}},f=class extends r{constructor(e,o,n){super();this.states={};this.changed=!1;this.component=e,this.props=o,this.slots=n}onMount(){for(let e in this.component.source.slots)this.slots[e]===void 0&&(this.slots[e]=()=>this.component.source.slots[e](this));this.states=this.component.source.states(this),this.content=this.component.source.render(this),this.content.mount(this,this.parentE,this.el)}onUnmount(){this.content.unmount()}reset(){this.states=this.component.source.states(this)}refresh(){let e=this.component.source.render(this);this.content.morph(e),this.changed=!1}onMorph(e){if(this.component.morphMode==0){let o=!1;JSON.stringify(this.props)!==JSON.stringify(e.props)&&(o=!0,this.props=e.props),o&&this.content.morph(e.component.source.render(this))}this.component.morphMode==1&&this.content.morph(e.component.source.render(this))}getState(e){return this.states[e]}setState(e,o){this.states[e]=o,this.changed=!0}track(e){e(),this.changed&&this.refresh()}getSlot(e=""){return this.slots[e]}getProp(e){return this.props[e]}getApiResult(e){return null}get(e){if(this.states[e]!==void 0)return this.states[e];if(this.props[e]!==void 0)return this.props[e];if(this.slots[e]!==void 0)return this.slots[e]}resolveRelativeNodes(){return this.content.resolveRelativeNodes()}resolveNextNodeOf(e){return this.parent.resolveNextNodeOf(this)}},v=class extends r{constructor(e,o){super();this.source=o,this.condition=e}onMount(){this.condition&&this.source.mount(this,this.parentE,this.el)}onUnmount(){this.condition&&this.source.unmount()}onMorph(e){let o=e.condition;o!=this.condition&&(o?this.source.mount(this,this.parentE,this.el):this.source.onUnmount(),this.condition=o)}resolveRelativeNodes(){return this.condition?this.source.resolveRelativeNodes():[void 0,void 0]}resolveNextNodeOf(e){return this.parent.resolveNextNodeOf(this)}};window.StackWeb={Entity:r,Root:h,Group:l,Dom:c,Text:d,HelloWorld:a,Component:p,Invoke:f,If:v};})();
//# sourceMappingURL=stackweb.min.js.map
